# ğŸ“‹ InvestIQ - ×¤×¨×•×™×§×˜ × ×™×”×•×œ ××©×§×™×¢×™× ×¢× AI Chat

## ğŸ¯ ×¡×§×™×¨×” ×›×œ×œ×™×ª

**InvestIQ** ×”×™× ×¤×œ×˜×¤×•×¨××” ××•×“×¨× ×™×ª ×œ× ×™×”×•×œ ××©×§×™×¢×™× ×‘×™×©×¨××œ. ×”××©×ª××©×ª ×™×›×•×œ×”:
- â• ×œ×”×•×¡×™×£ ××©×§×™×¢×™× ×—×“×©×™×
- ğŸ’¬ ×œ×©××•×œ ×©××œ×•×ª ×‘×¢×‘×¨×™×ª ×¢×œ ×”× ×ª×•× ×™× ×©×œ×” ×“×¨×š AI Chat
- ğŸ“Š ×œ×¨××•×ª ××ª ×›×œ ×”××©×§×™×¢×™× ×‘×ª×¦×•×’×” ×™×“×™×“×•×ª×™×ª

---

## ğŸ—ï¸ ××¨×›×™×˜×§×˜×•×¨×”

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    FRONTEND (React)                     â”‚
â”‚              localhost:5173                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  - App.tsx (Router ×‘×™×Ÿ ×“×¤×™×)                           â”‚
â”‚  - pages/AddInvestor.tsx (×˜×•×¤×¡ ×”×•×¡×¤×ª ××©×§×™×¢)           â”‚
â”‚  - pages/Chat.tsx (×××©×§ AI Chat)                       â”‚
â”‚  - TypeScript + Tailwind CSS + shadcn/ui              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†• (Fetch API + JSON)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               BACKEND (FastAPI + Python)                â”‚
â”‚              127.0.0.1:8000                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  - main.py (API Endpoints)                              â”‚
â”‚  - models.py (SQLAlchemy Models)                        â”‚
â”‚  - database.py (PostgreSQL Connection)                  â”‚
â”‚  - schemas.py (Pydantic Validation)                     â”‚
â”‚  - llm.py (OpenAI RAG Chat)                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â†• (asyncpg + SQL)
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚            DATABASE (PostgreSQL on Render)              â”‚
â”‚  postgresql://synap_user:***@dpg-****/synap_db         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Table: investors                                       â”‚
â”‚  - id (Primary Key)                                     â”‚
â”‚  - full_name, id_number, email, phone                  â”‚
â”‚  - investment_amount, start_date                        â”‚
â”‚  - investor_type, notes                                 â”‚
â”‚  - created_at, updated_at                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ ××‘× ×” ×”×§×‘×¦×™×

```
investiq/
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ App.tsx                 # Router ×¨××©×™
â”‚   â”‚   â”œâ”€â”€ pages/
â”‚   â”‚   â”‚   â”œâ”€â”€ AddInvestor.tsx     # ×˜×•×¤×¡ ×”×•×¡×¤×”
â”‚   â”‚   â”‚   â””â”€â”€ Chat.tsx             # ×××©×§ Chat
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â””â”€â”€ ui/                 # shadcn components
â”‚   â”‚   â””â”€â”€ main.tsx
â”‚   â”œâ”€â”€ package.json
â”‚   â””â”€â”€ tsconfig.json
â”‚
â””â”€â”€ backend/
    â”œâ”€â”€ app/
    â”‚   â”œâ”€â”€ __init__.py
    â”‚   â”œâ”€â”€ main.py                 # FastAPI app + endpoints
    â”‚   â”œâ”€â”€ models.py               # SQLAlchemy models
    â”‚   â”œâ”€â”€ database.py             # DB connection
    â”‚   â”œâ”€â”€ schemas.py              # Pydantic schemas
    â”‚   â””â”€â”€ llm.py                  # OpenAI RAG logic
    â”œâ”€â”€ venv/                       # Virtual environment
    â”œâ”€â”€ .env                        # Environment variables
    â”œâ”€â”€ requirements.txt
    â””â”€â”€ reset_db.py                 # DB reset script
```

---

## ğŸ”§ ×˜×›× ×•×œ×•×’×™×•×ª

### Frontend:
- **React 18** + **Vite** - UI Framework
- **TypeScript** - Type safety
- **Tailwind CSS** - Styling
- **shadcn/ui** - UI Components
- **Lucide Icons** - Icons
- **Fetch API** - HTTP Requests

### Backend:
- **FastAPI** - Web Framework
- **Python 3.11+**
- **SQLAlchemy 2.0** - ORM
- **asyncpg** - PostgreSQL driver (async)
- **Pydantic V2** - Data validation
- **OpenAI API** - AI Chat (gpt-4o-mini)
- **python-dotenv** - Environment variables

### Database:
- **PostgreSQL** - Render.com
- **asyncio** - Async operations

### Deployment:
- **Frontend**: Vercel (ready)
- **Backend**: Render (ready)
- **Database**: Render PostgreSQL (active)

---

## ğŸ”Œ API Endpoints

### Investors Management:
```
POST   /api/investors              # ×”×•×¡×¤×ª ××©×§×™×¢
GET    /api/investors              # ×§×‘×œ×ª ×›×œ ×”××©×§×™×¢×™×
GET    /api/investors/{id}         # ×§×‘×œ×ª ××©×§×™×¢ ×¡×¤×¦×™×¤×™
PUT    /api/investors/{id}         # ×¢×“×›×•×Ÿ ××©×§×™×¢
DELETE /api/investors/{id}         # ××—×™×§×ª ××©×§×™×¢
```

### AI Chat (RAG):
```
POST   /api/chat                   # ×©×œ×— ×©××œ×” ×œ-AI
```

**Input:**
```json
{
  "message": "×›××” ××©×§×™×¢×™× ×™×© ×œ×™?"
}
```

**Output:**
```json
{
  "question": "×›××” ××©×§×™×¢×™× ×™×© ×œ×™?",
  "answer": "×™×© ×œ×š 5 ××©×§×™×¢×™× ×‘××¢×¨×›×ª...",
  "status": "success"
}
```

---

## ğŸ“Š Database Schema

### Investors Table:
```sql
CREATE TABLE investors (
    id SERIAL PRIMARY KEY,
    full_name VARCHAR(255) NOT NULL,
    id_number VARCHAR(50) UNIQUE NOT NULL,
    email VARCHAR(255) NOT NULL,
    phone VARCHAR(50) NOT NULL,
    investment_amount FLOAT NOT NULL,
    start_date DATE NOT NULL,
    investor_type VARCHAR(50) NOT NULL,
    notes TEXT,
    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW()
);
```

---

## ğŸ”‘ ×“×¨×™×©×•×ª ×¡×‘×™×‘×”

### Backend (.env):
```env
OPENAI_API_KEY=sk-proj-xxxxxxxxxxxxx
DATABASE_URL=postgresql+asyncpg://user:pass@host/db
```

### Database Connection:
```
postgresql://synap_user:d7l7Mpsxx7FW25dmRdO4xqDLBTJrgMnK@dpg-d48cu74hg0os7387833g-a/synap_db
```

---

## ğŸš€ ×”×¨×¦×” ××§×•××™×ª

### Backend:
```bash
cd backend
venv\Scripts\activate  # Windows
source venv/bin/activate  # Mac/Linux

pip install -r requirements.txt
uvicorn app.main:app --reload
# http://127.0.0.1:8000
# Swagger: http://127.0.0.1:8000/docs
```

### Frontend:
```bash
cd frontend
npm install
npm run dev
# http://localhost:5173
```

---

## ğŸ’¬ AI Chat - RAG System

### ××™×š ×–×” ×¢×•×‘×“:

1. **User Question** (×¢×‘×¨×™×ª)
   ```
   "×›××” ××©×§×™×¢×™× ×™×© ×œ×™?"
   ```

2. **Backend Extraction** - ××©×š ××ª ×›×œ × ×ª×•× ×™ ×”investors ×-DB

3. **Context Building** - ×‘× ×” context ×¢× ×”× ×ª×•× ×™×:
   ```
   × ×ª×•× ×™ ×”××©×§×™×¢×™×:
   ID: 1
   ×©×: ×“×•×“ ×›×”×Ÿ
   ×¡×›×•× ×”×©×§×¢×”: â‚ª100,000
   ...
   ```

4. **OpenAI Request** - ×©×œ×— ×œ-ChatGPT ×¢× system prompt:
   ```
   "×¢× ×” ×¨×§ ×¢×œ ×‘×¡×™×¡ ×”× ×ª×•× ×™× ×©× ×ª×•× ×™× ×œ×š"
   ```

5. **Answer** (×¢×‘×¨×™×ª)
   ```
   "×™×© ×œ×š 1 ××©×§×™×¢ - ×“×•×“ ×›×”×Ÿ"
   ```

### Model Used:
- **gpt-4o-mini** - ×–×•×œ (~$0.001 ×œ×©××œ×”)
- Temperature: 0.7
- ×¢×‘×¨×™×ª full-support

---

## ğŸ¨ Design System

### Colors:
- Primary: `#2F80ED` (Blue)
- Secondary: `#56CCF2` (Light Blue)
- Background: `#F8F9FB` (Light Gray)
- Text Dark: `#1A2B4A`
- Text Light: `#717182`

### Typography:
- Headers: Bold, 28-32px
- Body: Regular, 14-16px
- Direction: RTL (×¢×‘×¨×™×ª)

### Components:
- Input Fields: Light gray background, blue focus
- Buttons: Gradient blue, hover opacity
- Chat Messages: User (blue), Assistant (gray)
- Icons: Lucide React

---

## ğŸ“ Investor Types:
- `individual` - ××©×§×™×¢ ×¤×¨×˜×™
- `institutional` - ××©×§×™×¢ ××•×¡×“×™
- `angel` - ××œ××š ×”×©×§×¢×•×ª
- `fund` - ×§×¨×Ÿ ×”×©×§×¢×•×ª
- `other` - ××—×¨

---

## âœ… Checklist - ××” ×©×™×© ×•×¦×¨×™×š:

### âœ… ×§×™×™×:
- âœ… Frontend React App ×¢× 2 ×“×¤×™×
- âœ… Backend FastAPI ×¢× CRUD endpoints
- âœ… PostgreSQL Database ×‘Render
- âœ… AI Chat ×¢× RAG
- âœ… Hebrew Support
- âœ… CORS Configured
- âœ… Async/Await throughout

### ğŸ”„ Future Enhancements:
- [ ] Chat History (×©××™×¨×” ×©×œ ×©×™×—×•×ª ×§×•×“××•×ª)
- [ ] User Authentication
- [ ] Multiple Tenants (clients)
- [ ] More DB Tables (deals, campaigns, etc.)
- [ ] Dashboard with Charts
- [ ] Export to Excel
- [ ] Email Notifications
- [ ] Mobile App

---

## ğŸ› Troubleshooting

### CORS Errors:
- âœ… Fixed: CORS middleware configured for `http://localhost:5173`

### Database Column Errors:
- âœ… Fixed: Drop table and let FastAPI recreate

### OpenAI API Key Invalid:
- Check `.env` file in backend
- Verify API key from platform.openai.com

### Chat Not Responding:
- Check OpenAI API key has credits
- Verify backend running on 8000
- Check network connection

---

## ğŸ“ Important Links

- **Frontend**: http://localhost:5173
- **Backend**: http://127.0.0.1:8000
- **Swagger Docs**: http://127.0.0.1:8000/docs
- **Database**: Render.com Dashboard
- **OpenAI**: https://platform.openai.com/

---

## ğŸ¯ Current Status

**MVP (Minimum Viable Product):** âœ… COMPLETE
- Investors CRUD: âœ…
- AI Chat with RAG: âœ…
- Hebrew Support: âœ…
- Real Database: âœ…

**Next Milestone:** Chat History + Authentication

---

## ğŸ“š Notes for Future Development

1. **RAG Optimization**: ×›×™×•× ×©×•×œ×—×™× ××ª ×›×œ ×”× ×ª×•× ×™×. ×‘×¢×ª×™×“ - ×œ×”×•×¡×™×£ embedding search.
2. **Scaling**: ×× ×™×”×™×• 10,000+ ××©×§×™×¢×™×, ×¦×¨×™×š vector DB (Pinecone/Weaviate).
3. **Multi-Table Support**: × ×™×ª×Ÿ ×œ×”×¨×—×™×‘ ××ª `llm.py` ×œ×”×›×™×œ × ×ª×•× ×™× ××˜×‘×œ××•×ª × ×•×¡×¤×•×ª.
4. **Cost Optimization**: Monitor OpenAI usage ×‘monthly.
5. **Security**: Add authentication layer before production.

---

## ğŸš€ Deploy to Production

### Frontend (Vercel):
```bash
git push origin main
# Auto-deploys from GitHub
```

### Backend (Render):
```bash
git push origin main
# Auto-deploys from GitHub
```

---

**×¢×•×“×›×Ÿ:** × ×•×‘××‘×¨ 2025
**×•×’×¨×¡×”:** 1.0 MVP